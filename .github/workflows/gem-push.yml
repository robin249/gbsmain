name: Ruby



on:

  push:

    branches: [ main ]

  pull_request:

    branches: [ main ]



jobs:

  deploy:

     runs-on: ubuntu-latest

     steps:

      - uses: appleboy/ssh-action@master

        name: executing remote ssh commands using password

        with:

         host: ${{secrets.SSH_HOST}}

         key: ${{secrets.SSH_KEY}}

         username: ${{secrets.SSH_USERNAME}}



         script: |

          cd /var/www/html/gbs

          git pull origin main

          source ~/.profile

          bundle install

          sudo service apache2 restart
